<html>
<head>
	<title>Transistion Test</title>

	<style type="text/css">
		body {
			margin: 0;
		}

		.layout-header {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;

			height: 3em;

			background: #006;
			color: #eee;
		}

		.layout-content {
			position: absolute;
			top: 3em;
			bottom: 0;
			width: 100%;
			color: #eee;
			background: #600;
		}

		.slide {
			position: absolute;
			width: 100%;
			min-height: 100%;

			transition: all 0.25s ease-in-out;
			-moz-transition: all 0.25s ease-in-out; /* Firefox 4 */
			-webkit-transition: all 0.25s ease-in-out; /* Safari and Chrome */
			-o-transition: all 0.25s ease-in-out;/* Opera */

			-webkit-font-smoothing: subpixel-antialiased;
		}
	</style>
</head>
<body>
	<div class="layout-header">
		This is the header
	</div>

	<div class="layout-content">
		<div class="slide">
			<h1>This is some content.</h1>
			<p style="padding: 10px; border: 1px solid black;">
				Vestibulum consequat elementum erat, eu tristique magna semper eu. Aliquam fringilla blandit commodo. Sed malesuada molestie purus, quis luctus neque ultrices et. Aenean aliquam metus ut diam ultrices et consectetur mi ullamcorper. In pulvinar vestibulum felis, ut imperdiet justo pretium eget. Nulla ut posuere leo. Donec porta augue eu lorem condimentum at elementum magna rutrum.
			</p>
			<button id="drillIn" type="button">Drill In</button>
		</div>
	</div>

	<script src="http://code.jquery.com/jquery-latest.js"></script>
	<script type="text/javascript">
		$(function(){
			var container = $('.layout-content');

			var replaceFrom = function(content, initialX){
				var currentSlide = container.find('.slide'),
					newSlide = $('<div class="slide" />').append(content);

				// append the new content off screen to the right
				newSlide.css('transform', 'translateX('+ -initialX + '%)');
				container.append(newSlide);

				// perform the slide
				setTimeout(function(){
					// remove the current slide when it's off screen
					currentSlide.on('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function(){
						currentSlide.remove();
					});

					// move both slides to the left
					currentSlide.css('transform', 'translateX(' + initialX + '%)');
					newSlide.css('transform', '');
				}, 0)
			}

			var replaceFromLeft = function(content){
				replaceFrom(content, 100);
			};


			var replaceFromRight = function(content){
				replaceFrom(content, -100);
			};

			
			$('#drillIn').on('click', function(){
				replaceFromRight($('<p> New Content!</p>'));

			});
		});
	</script>
</body>
</html>